group_by(gender, looks_cat) %>%
summarize(count=n())
beauty_data_summary <- beauty_data_summary %>%
group_by(gender) %>%
mutate(percent_gender = count/sum(count)) %>%
ungroup() %>%
mutate(percent_all = count/sum(count))
beauty_data <- beauty_data %>%
mutate(gender=if_else(female==1,'women','men'),
looks_cat=case_when(abvavg==1 ~ 'AboveAvg',
belavg==1 ~ 'BelowAvg',
TRUE ~ 'Avg'))
beauty_data_summary <- beauty_data %>%
group_by(gender, looks_cat) %>%
summarize(count=n())
beauty_data_summary <- beauty_data_summary %>%
group_by(gender) %>%
mutate(percent_gender = count/sum(count)*100) %>%
ungroup() %>%
mutate(percent_all = count/sum(count)*100)
beauty_data <- beauty_data %>%
mutate(gender=if_else(female==1,'women','men'),
looks_cat=case_when(abvavg==1 ~ 'AboveAvg',
belavg==1 ~ 'BelowAvg',
TRUE ~ 'Avg'))
beauty_data_summary <- beauty_data %>%
group_by(gender, looks_cat) %>%
summarize(count=n())
beauty_data_summary <- beauty_data_summary %>%
group_by(gender) %>%
mutate(percent_gender = count/sum(count)*100) %>%
ungroup() %>%
mutate(percent_all = count/sum(count)*100)
kable(beauty_data_summary)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
looks_women_1 <- lm(log(wage)~belavg+abvavg, data=women)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
coefficients_men_1 <- coef(men)
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg, data=women)
coefficients_women_1 <- coef(women)
kable(coefficients_women_1)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
coefficients_men_1 <- coef(looks_men_1)
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg, data=women)
coefficients_women_1 <- coef(looks_women_1)
kable(coefficients_women_1)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
coefficients_men_1 <- coef(summary(looks_men_1))
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg, data=women)
coefficients_women_1 <- coef(summary(looks_women_1))
kable(coefficients_women_1)
knitr::opts_chunk$set(dev = 'png',tidy.opts=list(width.cutoff=60),tidy=TRUE)
library(tidyverse)
library(knitr)
library(car)
setwd("~/Grad School/2021-01 Spring/IA 530 - Econometrics-Ind Study/Exam_2")
# import data
vote_data <- read_csv("VOTE1.csv")
school_data <- read_csv("ELEM94_95.csv")
homePrice_data <- read_csv("KIELMC.csv")
beauty_data <- read_csv("BEAUTY.csv")
# set alpha level
alpha <- 0.05
vote_1_model <- lm(voteA ~ log(expendA)+log(expendB)+prtystrA, data=vote_data)
coefficients_vote_1 <- coef(summary(vote_1_model))
kable(coefficients_vote_1)
school_model_1 <- lm(lavgsal ~ bs, data=school_data)
coefficients_school_1 <- coef(summary(school_model_1))
kable(coefficients_school_1)
old_value = exp(predict(school_model_1, newdata=data.frame(bs=c(1))))
new_value = exp(predict(school_model_1, newdata=data.frame(bs=c(2))))
(new_value-old_value)/old_value
# calculate the confidence interval
lower_bound <- coefficients_school_1['bs', 'Estimate']-
qt(1-alpha/2,nrow(school_data))*coefficients_school_1['bs', 'Std. Error']
upper_bound <- coefficients_school_1['bs', 'Estimate']+
qt(1-alpha/2,nrow(school_data))*coefficients_school_1['bs', 'Std. Error']
c(lower_bound, upper_bound)
school_model_2 <- lm(lavgsal ~ bs+lenrol+lstaff, data=school_data)
coefficients_school_2 <- coef(summary(school_model_2))
kable(coefficients_school_2)
old_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)))))
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1.01)),
lstaff=c(log(1)))))
(new_value-old_value)/old_value
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1.01)))))
(new_value-old_value)/old_value
kable(cor(school_data %>% select(bs,lenrol,lstaff)))
old_value = exp(predict(school_model_2, newdata=data.frame(bs=c(0.2),
lenrol=c(log(1000)),
lstaff=c(log(100)))))
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(0.2),
lenrol=c(log(1000)),
lstaff=c(log(101)))))
# check percent decrease is the same for 1% increase
(new_value-old_value)/old_value
(new_value-old_value)
school_model_3 <- lm(lavgsal ~ bs+lenrol+lstaff+lunch, data=school_data)
coefficients_school_3 <- coef(summary(school_model_3))
kable(coefficients_school_3)
old_value = exp(predict(school_model_3, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)),
lunch=c(1))))
new_value = exp(predict(school_model_3, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)),
lunch=c(2))))
# check percent decrease is the same for 1% increase
(new_value-old_value)/old_value
price_model_1 <- lm(lprice ~ ldist, data=homePrice_data)
coefficients_price_1 <- coef(summary(price_model_1))
kable(coefficients_price_1)
price_model_2 <- lm(lprice ~ ldist+log(intst)+log(area)+log(land)+rooms+baths+age, data=homePrice_data)
coefficients_price_2 <- coef(summary(price_model_2))
kable(coefficients_price_2)
cor(homePrice_data %>% select(ldist, lintst, larea, lland, rooms, baths, age))
price_model_3 <- lm(lprice ~ ldist+log(intst)+log(area)+log(land)+rooms+baths+age+I(log(intst)^2), data=homePrice_data)
coefficients_price_3 <- coef(summary(price_model_3))
kable(coefficients_price_3)
beauty_data <- beauty_data %>%
mutate(gender=if_else(female==1,'women','men'),
looks_cat=case_when(abvavg==1 ~ 'AboveAvg',
belavg==1 ~ 'BelowAvg',
TRUE ~ 'Avg'))
beauty_data_summary <- beauty_data %>%
group_by(gender, looks_cat) %>%
summarize(count=n())
beauty_data_summary <- beauty_data_summary %>%
group_by(gender) %>%
mutate(percent_gender = count/sum(count)*100) %>%
ungroup() %>%
mutate(percent_all = count/sum(count)*100)
kable(beauty_data_summary)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
coefficients_men_1 <- coef(summary(looks_men_1))
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg, data=women)
coefficients_women_1 <- coef(summary(looks_women_1))
kable(coefficients_women_1)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg+educ+exper+I(exper^2)+union+goodhlth+black+married+south+bigcity+smllcity+service, data=men)
coefficients_men_1 <- coef(summary(looks_men_1))
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg+educ+exper+I(exper^2)+union+goodhlth+black+married+south+bigcity+smllcity+service, data=women)
coefficients_women_1 <- coef(summary(looks_women_1))
kable(coefficients_women_1)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg+educ+exper+I(exper^2)+union+goodhlth+black+married+south+bigcity+smllcity+service, data=men)
coefficients_men_1 <- coef(summary(looks_men_1))
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg+educ+exper+I(exper^2)+union+goodhlth+black+married+south+bigcity+smllcity+service, data=women)
coefficients_women_1 <- coef(summary(looks_women_1))
kable(coefficients_women_1)
vif
?vif
knitr::opts_chunk$set(dev = 'png',tidy.opts=list(width.cutoff=60),tidy=TRUE)
library(tidyverse)
library(knitr)
library(car)
setwd("~/Grad School/2021-01 Spring/IA 530 - Econometrics-Ind Study/Exam_2")
# import data
vote_data <- read_csv("VOTE1.csv")
school_data <- read_csv("ELEM94_95.csv")
homePrice_data <- read_csv("KIELMC.csv")
beauty_data <- read_csv("BEAUTY.csv")
# set alpha level
alpha <- 0.05
vote_1_model <- lm(voteA ~ log(expendA)+log(expendB)+prtystrA, data=vote_data)
coefficients_vote_1 <- coef(summary(vote_1_model))
kable(coefficients_vote_1)
school_model_1 <- lm(lavgsal ~ bs, data=school_data)
coefficients_school_1 <- coef(summary(school_model_1))
kable(coefficients_school_1)
old_value = exp(predict(school_model_1, newdata=data.frame(bs=c(1))))
new_value = exp(predict(school_model_1, newdata=data.frame(bs=c(2))))
(new_value-old_value)/old_value
# calculate the confidence interval
lower_bound <- coefficients_school_1['bs', 'Estimate']-
qt(1-alpha/2,nrow(school_data))*coefficients_school_1['bs', 'Std. Error']
upper_bound <- coefficients_school_1['bs', 'Estimate']+
qt(1-alpha/2,nrow(school_data))*coefficients_school_1['bs', 'Std. Error']
c(lower_bound, upper_bound)
school_model_2 <- lm(lavgsal ~ bs+lenrol+lstaff, data=school_data)
coefficients_school_2 <- coef(summary(school_model_2))
kable(coefficients_school_2)
old_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)))))
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1.01)),
lstaff=c(log(1)))))
(new_value-old_value)/old_value
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1.01)))))
(new_value-old_value)/old_value
kable(cor(school_data %>% select(bs,lenrol,lstaff)))
old_value = exp(predict(school_model_2, newdata=data.frame(bs=c(0.2),
lenrol=c(log(1000)),
lstaff=c(log(100)))))
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(0.2),
lenrol=c(log(1000)),
lstaff=c(log(101)))))
# check percent decrease is the same for 1% increase
(new_value-old_value)/old_value
(new_value-old_value)
school_model_3 <- lm(lavgsal ~ bs+lenrol+lstaff+lunch, data=school_data)
coefficients_school_3 <- coef(summary(school_model_3))
kable(coefficients_school_3)
old_value = exp(predict(school_model_3, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)),
lunch=c(1))))
new_value = exp(predict(school_model_3, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)),
lunch=c(2))))
# check percent decrease is the same for 1% increase
(new_value-old_value)/old_value
price_model_1 <- lm(lprice ~ ldist, data=homePrice_data)
coefficients_price_1 <- coef(summary(price_model_1))
kable(coefficients_price_1)
price_model_2 <- lm(lprice ~ ldist+log(intst)+log(area)+log(land)+rooms+baths+age, data=homePrice_data)
coefficients_price_2 <- coef(summary(price_model_2))
kable(coefficients_price_2)
cor(homePrice_data %>% select(ldist, lintst, larea, lland, rooms, baths, age))
price_model_3 <- lm(lprice ~ ldist+log(intst)+log(area)+log(land)+rooms+baths+age+I(log(intst)^2), data=homePrice_data)
coefficients_price_3 <- coef(summary(price_model_3))
kable(coefficients_price_3)
beauty_data <- beauty_data %>%
mutate(gender=if_else(female==1,'women','men'),
looks_cat=case_when(abvavg==1 ~ 'AboveAvg',
belavg==1 ~ 'BelowAvg',
TRUE ~ 'Avg'))
beauty_data_summary <- beauty_data %>%
group_by(gender, looks_cat) %>%
summarize(count=n())
beauty_data_summary <- beauty_data_summary %>%
group_by(gender) %>%
mutate(percent_gender = count/sum(count)*100) %>%
ungroup() %>%
mutate(percent_all = count/sum(count)*100)
kable(beauty_data_summary)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
coefficients_men_1 <- coef(summary(looks_men_1))
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg, data=women)
coefficients_women_1 <- coef(summary(looks_women_1))
kable(coefficients_women_1)
old_value = exp(predict(looks_men_1, newdata=data.frame(belavg=c(0),abvavg=c(0))))
new_value = exp(predict(looks_men_1, newdata=data.frame(bs=c(0.2),
lenrol=c(log(1000)),
lstaff=c(log(101)))))
log(1.01)
1/100
library(tidyverse)
library(lubridate)
setwd("~/Grad School/2021-01 Spring/IA 530 - Econometrics-Ind Study/ia530_final_project/R Code")
library(here)
test <- read_delim(here('Data','cdc_suicide_data.txt'))
test <- read_delim(here('Data','cdc_suicide_data.txt'), delim=',')
View(test)
test <- read_delim(here('Data','cdc_suicide_data.txt'), delim='\tab')
View(test)
glimpse(test)
cdc_suicide_data <- read_delim(here('Data','cdc_suicide_data.txt'), delim='\tab') %>%
clean_names() %>%
select(-c(population, crude_rate))
library(janitor)
cdc_suicide_data <- read_delim(here('Data','cdc_suicide_data.txt'), delim='\tab') %>%
clean_names() %>%
select(-c(population, crude_rate))
cdc_suicide_data <- read_delim(here('Data','cdc_suicide_data.txt'), delim='\tab') %>%
clean_names() %>%
select(-c(population, crude_rate))
View(cdc_suicide_data)
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(is.na(ten_year_age_groups))
cdc_suicide_data_all <- read_delim(here('Data','cdc_suicide_data.txt'), delim='\tab') %>%
clean_names() %>%
select(-c(population, crude_rate))
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(is.na(ten_year_age_groups))
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups))
cdc_suicide_data_all <- read_delim(here('Data','cdc_suicide_data.txt'), delim='\tab') %>%
clean_names() %>%
select(-c(population, crude_rate, notes))
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups))
?read_delim
cdc_suicide_data_totals <- cdc_suicide_data_all %>%
filter(is.na(ten_year_age_groups))
View(cdc_suicide_data_totals)
cdc_suicide_data_totals <- cdc_suicide_data_all %>%
filter(is.na(ten_year_age_groups) & !is.na(census_region))
cdc_suicide_data %>% select(ten_year_age_groups_code) %>% unique()
?as.factor
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code))
levels(cdc_suicide_data$ten_year_age_groups_code)
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = as.factor(ten_year_age_groups_code))
levels(cdc_suicide_data$ten_year_age_groups_code)
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code))
cdc_suicide_data$ten_year_age_groups_code
glimpse(cdc_suicide_data)
levels(cdc_suicide_data$age_group)
t <- levels(cdc_suicide_data$age_group)
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+")))
levels(cdc_suicide_data$age_group)
View(cdc_suicide_data)
?grepl
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+")),
month_end = gsub('/','',month_code))
?split
?separate()
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+"))) %>%
separate(month_code, sep='/')
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+"))) %>%
separate(month_code, sep='/', into=c(NA,'month'))
paste(c('r','t'))
paste('r','t')
glimpse(cdc_suicide_data)
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+"))) %>%
separate(month_code, sep='/', into=c(NA,'month')) %>%
mutate(year_month = ymd(paste(as.character(year), '01',month)))
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+"))) %>%
separate(month_code, sep='/', into=c(NA,'month')) %>%
mutate(year_month = ymd(paste(as.character(year), '31',month)))
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+"))) %>%
separate(month_code, sep='/', into=c(NA,'month')) %>%
mutate(year_month = ceiling_date(ymd(paste(as.character(year), '01',month))),unit='month')
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+"))) %>%
separate(month_code, sep='/', into=c(NA,'month')) %>%
mutate(year_month = ceiling_date(ymd(paste(as.character(year), '01',month)),unit='month'))
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+"))) %>%
separate(month_code, sep='/', into=c(NA,'month')) %>%
mutate(year_month = rollback(ceiling_date(ymd(paste(as.character(year), '01',month)),unit='month')))
ggplot(cdc_suicide_data, aes(x=year_month,y=deaths, color=age_group)) +
geom_line()
ggplot(cdc_suicide_data, aes(x=year_month,y=deaths, color=age_group)) +
geom_point()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1'), aes(x=year_month,y=deaths, color=age_group)) +
geom_point()
library(tidyverse)
library(lubridate)
library(here)
library(janitor)
cdc_suicide_data_all <- read_delim(here('Data','cdc_suicide_data.txt'), delim='\tab') %>%
clean_names() %>%
select(-c(population, crude_rate, notes))
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+"))) %>%
separate(month_code, sep='/', into=c(NA,'month')) %>%
mutate(year_month = rollback(ceiling_date(ymd(paste(as.character(year), '01',month)),unit='month')))
cdc_suicide_data_totals <- cdc_suicide_data_all %>%
filter(is.na(ten_year_age_groups) & !is.na(census_region))
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1'), aes(x=year_month,y=deaths, color=age_group)) +
geom_point()
View(cdc_suicide_data)
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+"))) %>%
separate(month_code, sep='/', into=c(NA,'month')) %>%
mutate(year_month = rollback(ceiling_date(ymd(paste(as.character(year),month, '01')),unit='month')))
cdc_suicide_data_totals <- cdc_suicide_data_all %>%
filter(is.na(ten_year_age_groups) & !is.na(census_region))
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1'), aes(x=year_month,y=deaths, color=age_group)) +
geom_point()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1'), aes(x=year_month,y=deaths, color=age_group)) +
geom_line()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & year==2000), aes(x=year_month,y=deaths, color=age_group)) +
geom_line()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group='35-44'), aes(x=month,y=deaths, color=year)) +
geom_line()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group='35-44'), aes(x=month,y=deaths, color=year)) +
geom_line()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths, color=year)) +
geom_line()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths, color=year)) +
geom_point()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths, color=as.character(year))) +
geom_point()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths, color=as.character(year))) +
geom_line()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths)) +
geom_line()
glimpse(cdc_suicide_data)
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths,age=year)) +
geom_line()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths,age=year)) +
geom_line()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths,color=year)) +
geom_line()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths,fill=year)) +
geom_line()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths,color=year)) +
geom_line()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths)) +
geom_line()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths,color=year)) +
geom_point()
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups)) %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+"))) %>%
separate(month_code, sep='/', into=c(NA,'month')) %>%
mutate(year_month = rollback(ceiling_date(ymd(paste(as.character(year),month, '01')),unit='month')),
year_cat = as.character(year))
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths,color=year_cat)) +
geom_point()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths,color=year_cat)) +
geom_line()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths,color=year_cat)) +
geom_line() +
geom_point()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths,group=year_cat)) +
geom_line() +
geom_point()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=month,y=deaths,group=year_cat,color=year_cat)) +
geom_line() +
geom_point()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44'), aes(x=year_month,y=deaths,group=year_cat,color=year_cat)) +
geom_line() +
geom_point()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44' & between(year,2010,2020)), aes(x=year_month,y=deaths,group=year_cat,color=year_cat)) +
geom_line() +
geom_point()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='35-44' & between(year,2015,2020)), aes(x=year_month,y=deaths,group=year_cat,color=year_cat)) +
geom_line() +
geom_point()
ggplot(cdc_suicide_data %>% filter(census_region_code=='CENS-R1' & age_group=='15-24' & between(year,2015,2020)), aes(x=year_month,y=deaths,group=year_cat,color=year_cat)) +
geom_line() +
geom_point()
summary <- cdc_suicide_data %>%
filter(age_group=='15-24') %>%
group_by(month) %>%
summarize(avg=mean(deaths),sd=sd(deaths))
View(summary)
ggplot(summary, aes(x=month,y=avg)) +
geom_errorbar(aes(ymin=avg-sd,ymax=avg+sd))
ggplot(summary, aes(x=month,y=avg)) +
geom_errorbar(aes(ymin=avg-sd,ymax=avg+sd)) +
geom_point()
levels(cdc_suicide_data$age_group)
summary <- cdc_suicide_data %>%
group_by(month,age_group) %>%
summarize(avg=mean(deaths),sd=sd(deaths))
View(summary)
ggplot(summary, aes(x=month,y=avg)) +
geom_errorbar(aes(ymin=avg-sd,ymax=avg+sd)) +
geom_point() +
facet_wrap(~age_group)
summary <- cdc_suicide_data %>%
group_by(month,age_group,year) %>%
summarize(total=sum(deaths)) %>%
group_by(month,age_group) %>%
summarize(avg=mean(total),sd=sd(total))
View(summary)
ggplot(summary, aes(x=month,y=avg)) +
geom_errorbar(aes(ymin=avg-sd,ymax=avg+sd)) +
geom_point() +
facet_wrap(~age_group)
