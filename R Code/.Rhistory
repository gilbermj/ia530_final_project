group_by(value) %>%
summarize(count=n())
all_results <- bind_rows(list('binom'=binom_results,'pois'=pois_results),.id='type')
ggplot(all_results, aes(x=value,fill=type)) +
geom_density(alpha=0.5, position='identity')
trials = 100000
p = 0.025
lambda = trials*p
x = 0:10000
binom_results <- as_tibble(rbinom(x, trials, p))
pois_results <- as_tibble(rpois(x, lambda))
binom_freq <- binom_results %>%
group_by(value) %>%
summarize(count=n())
pois_freq <- pois_results %>%
group_by(value) %>%
summarize(count=n())
all_results <- bind_rows(list('binom'=binom_results,'pois'=pois_results),.id='type')
ggplot(all_results, aes(x=value,fill=type)) +
geom_density(alpha=0.5, position='identity')
2.3/500
set.seed(1)
trials = 500
p = 0.0046
lambda = trials*p
x = 0:10000
binom_results <- as_tibble(rbinom(x, trials, p))
pois_results <- as_tibble(rpois(x, lambda))
binom_freq <- binom_results %>%
group_by(value) %>%
summarize(count=n())
pois_freq <- pois_results %>%
group_by(value) %>%
summarize(count=n())
all_results <- bind_rows(list('binom'=binom_results,'pois'=pois_results),.id='type')
ggplot(all_results, aes(x=value,fill=type)) +
geom_density(alpha=0.5, position='identity')
set.seed(1)
trials = 500
p = 0.30
lambda = trials*p
x = 0:10000
binom_results <- as_tibble(rbinom(x, trials, p))
pois_results <- as_tibble(rpois(x, lambda))
binom_freq <- binom_results %>%
group_by(value) %>%
summarize(count=n())
pois_freq <- pois_results %>%
group_by(value) %>%
summarize(count=n())
all_results <- bind_rows(list('binom'=binom_results,'pois'=pois_results),.id='type')
ggplot(all_results, aes(x=value,fill=type)) +
geom_density(alpha=0.5, position='identity')
trials = 50
p = 0.30
lambda = trials*p
x = 0:10000
binom_results <- as_tibble(rbinom(x, trials, p))
pois_results <- as_tibble(rpois(x, lambda))
binom_freq <- binom_results %>%
group_by(value) %>%
summarize(count=n())
pois_freq <- pois_results %>%
group_by(value) %>%
summarize(count=n())
all_results <- bind_rows(list('binom'=binom_results,'pois'=pois_results),.id='type')
ggplot(all_results, aes(x=value,fill=type)) +
geom_density(alpha=0.5, position='identity')
dbinom(7,7,0.3169)
dbinom(14,14,0.3169)
dbinom(500,500,0.3169)
dpois(3.4,5.6)
dnorm(0)
pnorm(0)
cardata = rpois(500,2.3)
table(cardata)
write.csv(cardata, "carChart.csv")
library(readr)
carChart <- read_csv("carChart.csv")
View(carChart)
carChart = carChart[,2]
table(carChart$x)
carTable = data.frame(table(carChart$x))names(carTable) = c("AccidentNum", "freq")
carTable = data.frame(table(carChart$x))
names(carTable) = c("AccidentNum", "freq")
View(carTable)
carTable$AccidentNum = as.numeric(carTable$AccidentNum)
View(carTable)
carChart <- read_csv("carChart.csv")
carChart = carChart[,2]
table(carChart$x)
carTable = data.frame(table(carChart$x))
names(carTable) = c("AccidentNum", "freq")
glimpse(carTable)
carTable$AccidentNum
library(tidyverse)
glimpse(carTable)
as.numeric(carTable$AccidentNum)
knitr::opts_chunk$set(dev = 'png',tidy.opts=list(width.cutoff=60),tidy=TRUE)
library(tidyverse)
library(knitr)
library(car)
setwd("~/Grad School/2021-01 Spring/IA 530 - Econometrics-Ind Study/Exam_2")
# import data
vote_data <- read_csv("VOTE1.csv")
school_data <- read_csv("ELEM94_95.csv")
homePrice_data <- read_csv("KIELMC.csv")
beauty_data <- read_csv("BEAUTY.csv")
# set alpha level
alpha <- 0.05
vote_1_model <- lm(voteA ~ log(expendA)+log(expendB)+prtystrA, data=vote_data)
coefficients_vote_1 <- coef(summary(vote_1_model))
kable(coefficients_vote_1)
school_model_1 <- lm(lavgsal ~ bs, data=school_data)
coefficients_school_1 <- coef(summary(school_model_1))
kable(coefficients_school_1)
old_value = exp(predict(school_model_1, newdata=data.frame(bs=c(1))))
new_value = exp(predict(school_model_1, newdata=data.frame(bs=c(2))))
(new_value-old_value)/old_value
# calculate the confidence interval
lower_bound <- coefficients_school_1['bs', 'Estimate']-
qt(1-alpha/2,nrow(school_data))*coefficients_school_1['bs', 'Std. Error']
upper_bound <- coefficients_school_1['bs', 'Estimate']+
qt(1-alpha/2,nrow(school_data))*coefficients_school_1['bs', 'Std. Error']
c(lower_bound, upper_bound)
school_model_2 <- lm(lavgsal ~ bs+lenrol+lstaff, data=school_data)
coefficients_school_2 <- coef(summary(school_model_2))
kable(coefficients_school_2)
old_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)))))
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1.01)),
lstaff=c(log(1)))))
(new_value-old_value)/old_value
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1.01)))))
(new_value-old_value)/old_value
kable(cor(school_data %>% select(bs,lenrol,lstaff)))
old_value = exp(predict(school_model_2, newdata=data.frame(bs=c(0.2),
lenrol=c(log(1000)),
lstaff=c(log(100)))))
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(0.2),
lenrol=c(log(1000)),
lstaff=c(log(101)))))
# check percent decrease is the same for 1% increase
(new_value-old_value)/old_value
(new_value-old_value)
school_model_3 <- lm(lavgsal ~ bs+lenrol+lstaff+lunch, data=school_data)
coefficients_school_3 <- coef(summary(school_model_3))
kable(coefficients_school_3)
old_value = exp(predict(school_model_3, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)),
lunch=c(1))))
new_value = exp(predict(school_model_3, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)),
lunch=c(2))))
# check percent decrease is the same for 1% increase
(new_value-old_value)/old_value
price_model_1 <- lm(lprice ~ ldist, data=homePrice_data)
coefficients_price_1 <- coef(summary(price_model_1))
kable(coefficients_price_1)
price_model_2 <- lm(lprice ~ ldist+log(intst)+log(area)+log(land)+rooms+baths+age, data=homePrice_data)
coefficients_price_2 <- coef(summary(price_model_2))
kable(coefficients_price_2)
cor(homePrice_data %>% select(ldist, lintst, larea, lland, rooms, baths, age))
View(beauty_data)
View(beauty_data)
beauty_data <- beauty_data %>%
mutate(gender=if_else(female==1,'women','men'),
looks_cat=case_when(abvavg==1 ~ 'AboveAvg',
belavg==1 ~ 'BelowAvg',
TRUE ~ 'Avg'))
beauty_data <- beauty_data %>%
mutate(gender=if_else(female==1,'women','men'),
looks_cat=case_when(abvavg==1 ~ 'AboveAvg',
belavg==1 ~ 'BelowAvg',
TRUE ~ 'Avg'))
beauty_data <- beauty_data %>%
mutate(gender=if_else(female==1,'women','men'),
looks_cat=case_when(abvavg==1 ~ 'AboveAvg',
belavg==1 ~ 'BelowAvg',
TRUE ~ 'Avg'))
beauty_data_summary <- beauty_data %>%
group_by(gender, looks_cat) %>%
summarize(count=n())
View(beauty_data_summary)
beauty_data <- beauty_data %>%
mutate(gender=if_else(female==1,'women','men'),
looks_cat=case_when(abvavg==1 ~ 'AboveAvg',
belavg==1 ~ 'BelowAvg',
TRUE ~ 'Avg'))
beauty_data_summary <- beauty_data %>%
group_by(gender, looks_cat) %>%
summarize(count=n())
beauty_data_summary <- beauty_data_summary %>%
group_by(gender) %>%
mutate(count/sum(count))
beauty_data <- beauty_data %>%
mutate(gender=if_else(female==1,'women','men'),
looks_cat=case_when(abvavg==1 ~ 'AboveAvg',
belavg==1 ~ 'BelowAvg',
TRUE ~ 'Avg'))
beauty_data_summary <- beauty_data %>%
group_by(gender, looks_cat) %>%
summarize(count=n())
beauty_data_summary <- beauty_data_summary %>%
group_by(gender) %>%
mutate(percent_gender = count/sum(count)) %>%
ungroup() %>%
mutate(percent_all = count/sum(count))
beauty_data <- beauty_data %>%
mutate(gender=if_else(female==1,'women','men'),
looks_cat=case_when(abvavg==1 ~ 'AboveAvg',
belavg==1 ~ 'BelowAvg',
TRUE ~ 'Avg'))
beauty_data_summary <- beauty_data %>%
group_by(gender, looks_cat) %>%
summarize(count=n())
beauty_data_summary <- beauty_data_summary %>%
group_by(gender) %>%
mutate(percent_gender = count/sum(count)*100) %>%
ungroup() %>%
mutate(percent_all = count/sum(count)*100)
beauty_data <- beauty_data %>%
mutate(gender=if_else(female==1,'women','men'),
looks_cat=case_when(abvavg==1 ~ 'AboveAvg',
belavg==1 ~ 'BelowAvg',
TRUE ~ 'Avg'))
beauty_data_summary <- beauty_data %>%
group_by(gender, looks_cat) %>%
summarize(count=n())
beauty_data_summary <- beauty_data_summary %>%
group_by(gender) %>%
mutate(percent_gender = count/sum(count)*100) %>%
ungroup() %>%
mutate(percent_all = count/sum(count)*100)
kable(beauty_data_summary)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
looks_women_1 <- lm(log(wage)~belavg+abvavg, data=women)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
coefficients_men_1 <- coef(men)
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg, data=women)
coefficients_women_1 <- coef(women)
kable(coefficients_women_1)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
coefficients_men_1 <- coef(looks_men_1)
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg, data=women)
coefficients_women_1 <- coef(looks_women_1)
kable(coefficients_women_1)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
coefficients_men_1 <- coef(summary(looks_men_1))
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg, data=women)
coefficients_women_1 <- coef(summary(looks_women_1))
kable(coefficients_women_1)
knitr::opts_chunk$set(dev = 'png',tidy.opts=list(width.cutoff=60),tidy=TRUE)
library(tidyverse)
library(knitr)
library(car)
setwd("~/Grad School/2021-01 Spring/IA 530 - Econometrics-Ind Study/Exam_2")
# import data
vote_data <- read_csv("VOTE1.csv")
school_data <- read_csv("ELEM94_95.csv")
homePrice_data <- read_csv("KIELMC.csv")
beauty_data <- read_csv("BEAUTY.csv")
# set alpha level
alpha <- 0.05
vote_1_model <- lm(voteA ~ log(expendA)+log(expendB)+prtystrA, data=vote_data)
coefficients_vote_1 <- coef(summary(vote_1_model))
kable(coefficients_vote_1)
school_model_1 <- lm(lavgsal ~ bs, data=school_data)
coefficients_school_1 <- coef(summary(school_model_1))
kable(coefficients_school_1)
old_value = exp(predict(school_model_1, newdata=data.frame(bs=c(1))))
new_value = exp(predict(school_model_1, newdata=data.frame(bs=c(2))))
(new_value-old_value)/old_value
# calculate the confidence interval
lower_bound <- coefficients_school_1['bs', 'Estimate']-
qt(1-alpha/2,nrow(school_data))*coefficients_school_1['bs', 'Std. Error']
upper_bound <- coefficients_school_1['bs', 'Estimate']+
qt(1-alpha/2,nrow(school_data))*coefficients_school_1['bs', 'Std. Error']
c(lower_bound, upper_bound)
school_model_2 <- lm(lavgsal ~ bs+lenrol+lstaff, data=school_data)
coefficients_school_2 <- coef(summary(school_model_2))
kable(coefficients_school_2)
old_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)))))
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1.01)),
lstaff=c(log(1)))))
(new_value-old_value)/old_value
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1.01)))))
(new_value-old_value)/old_value
kable(cor(school_data %>% select(bs,lenrol,lstaff)))
old_value = exp(predict(school_model_2, newdata=data.frame(bs=c(0.2),
lenrol=c(log(1000)),
lstaff=c(log(100)))))
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(0.2),
lenrol=c(log(1000)),
lstaff=c(log(101)))))
# check percent decrease is the same for 1% increase
(new_value-old_value)/old_value
(new_value-old_value)
school_model_3 <- lm(lavgsal ~ bs+lenrol+lstaff+lunch, data=school_data)
coefficients_school_3 <- coef(summary(school_model_3))
kable(coefficients_school_3)
old_value = exp(predict(school_model_3, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)),
lunch=c(1))))
new_value = exp(predict(school_model_3, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)),
lunch=c(2))))
# check percent decrease is the same for 1% increase
(new_value-old_value)/old_value
price_model_1 <- lm(lprice ~ ldist, data=homePrice_data)
coefficients_price_1 <- coef(summary(price_model_1))
kable(coefficients_price_1)
price_model_2 <- lm(lprice ~ ldist+log(intst)+log(area)+log(land)+rooms+baths+age, data=homePrice_data)
coefficients_price_2 <- coef(summary(price_model_2))
kable(coefficients_price_2)
cor(homePrice_data %>% select(ldist, lintst, larea, lland, rooms, baths, age))
price_model_3 <- lm(lprice ~ ldist+log(intst)+log(area)+log(land)+rooms+baths+age+I(log(intst)^2), data=homePrice_data)
coefficients_price_3 <- coef(summary(price_model_3))
kable(coefficients_price_3)
beauty_data <- beauty_data %>%
mutate(gender=if_else(female==1,'women','men'),
looks_cat=case_when(abvavg==1 ~ 'AboveAvg',
belavg==1 ~ 'BelowAvg',
TRUE ~ 'Avg'))
beauty_data_summary <- beauty_data %>%
group_by(gender, looks_cat) %>%
summarize(count=n())
beauty_data_summary <- beauty_data_summary %>%
group_by(gender) %>%
mutate(percent_gender = count/sum(count)*100) %>%
ungroup() %>%
mutate(percent_all = count/sum(count)*100)
kable(beauty_data_summary)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
coefficients_men_1 <- coef(summary(looks_men_1))
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg, data=women)
coefficients_women_1 <- coef(summary(looks_women_1))
kable(coefficients_women_1)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg+educ+exper+I(exper^2)+union+goodhlth+black+married+south+bigcity+smllcity+service, data=men)
coefficients_men_1 <- coef(summary(looks_men_1))
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg+educ+exper+I(exper^2)+union+goodhlth+black+married+south+bigcity+smllcity+service, data=women)
coefficients_women_1 <- coef(summary(looks_women_1))
kable(coefficients_women_1)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg+educ+exper+I(exper^2)+union+goodhlth+black+married+south+bigcity+smllcity+service, data=men)
coefficients_men_1 <- coef(summary(looks_men_1))
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg+educ+exper+I(exper^2)+union+goodhlth+black+married+south+bigcity+smllcity+service, data=women)
coefficients_women_1 <- coef(summary(looks_women_1))
kable(coefficients_women_1)
vif
?vif
knitr::opts_chunk$set(dev = 'png',tidy.opts=list(width.cutoff=60),tidy=TRUE)
library(tidyverse)
library(knitr)
library(car)
setwd("~/Grad School/2021-01 Spring/IA 530 - Econometrics-Ind Study/Exam_2")
# import data
vote_data <- read_csv("VOTE1.csv")
school_data <- read_csv("ELEM94_95.csv")
homePrice_data <- read_csv("KIELMC.csv")
beauty_data <- read_csv("BEAUTY.csv")
# set alpha level
alpha <- 0.05
vote_1_model <- lm(voteA ~ log(expendA)+log(expendB)+prtystrA, data=vote_data)
coefficients_vote_1 <- coef(summary(vote_1_model))
kable(coefficients_vote_1)
school_model_1 <- lm(lavgsal ~ bs, data=school_data)
coefficients_school_1 <- coef(summary(school_model_1))
kable(coefficients_school_1)
old_value = exp(predict(school_model_1, newdata=data.frame(bs=c(1))))
new_value = exp(predict(school_model_1, newdata=data.frame(bs=c(2))))
(new_value-old_value)/old_value
# calculate the confidence interval
lower_bound <- coefficients_school_1['bs', 'Estimate']-
qt(1-alpha/2,nrow(school_data))*coefficients_school_1['bs', 'Std. Error']
upper_bound <- coefficients_school_1['bs', 'Estimate']+
qt(1-alpha/2,nrow(school_data))*coefficients_school_1['bs', 'Std. Error']
c(lower_bound, upper_bound)
school_model_2 <- lm(lavgsal ~ bs+lenrol+lstaff, data=school_data)
coefficients_school_2 <- coef(summary(school_model_2))
kable(coefficients_school_2)
old_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)))))
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1.01)),
lstaff=c(log(1)))))
(new_value-old_value)/old_value
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1.01)))))
(new_value-old_value)/old_value
kable(cor(school_data %>% select(bs,lenrol,lstaff)))
old_value = exp(predict(school_model_2, newdata=data.frame(bs=c(0.2),
lenrol=c(log(1000)),
lstaff=c(log(100)))))
new_value = exp(predict(school_model_2, newdata=data.frame(bs=c(0.2),
lenrol=c(log(1000)),
lstaff=c(log(101)))))
# check percent decrease is the same for 1% increase
(new_value-old_value)/old_value
(new_value-old_value)
school_model_3 <- lm(lavgsal ~ bs+lenrol+lstaff+lunch, data=school_data)
coefficients_school_3 <- coef(summary(school_model_3))
kable(coefficients_school_3)
old_value = exp(predict(school_model_3, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)),
lunch=c(1))))
new_value = exp(predict(school_model_3, newdata=data.frame(bs=c(1),
lenrol=c(log(1)),
lstaff=c(log(1)),
lunch=c(2))))
# check percent decrease is the same for 1% increase
(new_value-old_value)/old_value
price_model_1 <- lm(lprice ~ ldist, data=homePrice_data)
coefficients_price_1 <- coef(summary(price_model_1))
kable(coefficients_price_1)
price_model_2 <- lm(lprice ~ ldist+log(intst)+log(area)+log(land)+rooms+baths+age, data=homePrice_data)
coefficients_price_2 <- coef(summary(price_model_2))
kable(coefficients_price_2)
cor(homePrice_data %>% select(ldist, lintst, larea, lland, rooms, baths, age))
price_model_3 <- lm(lprice ~ ldist+log(intst)+log(area)+log(land)+rooms+baths+age+I(log(intst)^2), data=homePrice_data)
coefficients_price_3 <- coef(summary(price_model_3))
kable(coefficients_price_3)
beauty_data <- beauty_data %>%
mutate(gender=if_else(female==1,'women','men'),
looks_cat=case_when(abvavg==1 ~ 'AboveAvg',
belavg==1 ~ 'BelowAvg',
TRUE ~ 'Avg'))
beauty_data_summary <- beauty_data %>%
group_by(gender, looks_cat) %>%
summarize(count=n())
beauty_data_summary <- beauty_data_summary %>%
group_by(gender) %>%
mutate(percent_gender = count/sum(count)*100) %>%
ungroup() %>%
mutate(percent_all = count/sum(count)*100)
kable(beauty_data_summary)
men <- beauty_data %>% filter(female!=1)
women <- beauty_data %>% filter(female==1)
looks_men_1 <- lm(log(wage)~belavg+abvavg, data=men)
coefficients_men_1 <- coef(summary(looks_men_1))
kable(coefficients_men_1)
looks_women_1 <- lm(log(wage)~belavg+abvavg, data=women)
coefficients_women_1 <- coef(summary(looks_women_1))
kable(coefficients_women_1)
old_value = exp(predict(looks_men_1, newdata=data.frame(belavg=c(0),abvavg=c(0))))
new_value = exp(predict(looks_men_1, newdata=data.frame(bs=c(0.2),
lenrol=c(log(1000)),
lstaff=c(log(101)))))
log(1.01)
1/100
setwd("~/Grad School/2021-01 Spring/IA 530 - Econometrics-Ind Study/ia530_final_project/R Code")
library(tidyverse)
library(lubridate)
library(here)
library(janitor)
cdc_suicide_data_all <- read_delim(here('Data','suicide_data_1999_2019.txt'), delim='\tab') %>%
clean_names() %>%
select(-c(population, crude_rate, notes))
View(cdc_suicide_data_all)
cdc_suicide_data_all %>% select(ten_year_age_groups) %>% unique()
cdc_suicide_data_all %>% select(ten_year_age_groups_code) %>% unique()
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups) & ten_year_age_groups!='Not Stated') %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("1","1-4","5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+"))) %>%
separate(month_code, sep='/', into=c(NA,'month')) %>%
mutate(year_month = rollback(ceiling_date(ymd(paste(as.character(year),month, '01')),unit='month')),
year_cat = as.character(year))
View(cdc_suicide_data)
cdc_suicide_data <- cdc_suicide_data_all %>%
filter(!is.na(ten_year_age_groups) & ten_year_age_groups!='Not Stated' & deaths!=0) %>%
mutate(age_group = factor(ten_year_age_groups_code, levels=c("1","1-4","5-14","15-24","25-34","35-44","45-54","55-64","65-74","75-84","85+"))) %>%
separate(month_code, sep='/', into=c(NA,'month')) %>%
mutate(year_month = rollback(ceiling_date(ymd(paste(as.character(year),month, '01')),unit='month')),
year_cat = as.character(year))
